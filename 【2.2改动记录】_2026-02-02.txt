【2.2改动记录】_2026-02-02

1. **角色权限与编辑功能开发**
   - **后端权限控制**：
     - 实现了基于角色的编辑权限：管理员 (Project Admin) 和 审核员 (Annotation Approver) 可以编辑文本内容。
     - 标注员 (Annotator) 仅有只读权限，无法编辑原文。
     - 权限逻辑实现在 `backend/projects/permissions.py` 中的 `IsProjectAdminOrApprover` 类。
   - **原文自动备份**：
     - 修改 `backend/examples/serializers.py`，在更新 `text` 字段时，自动将修改前的原文备份到 `meta.original_text` 字段。
     - 确保原文历史可追溯。

2. **前端界面交互优化**
   - **“编辑原文”功能**：
     - 在标注界面增加了“编辑原文”按钮（仅对有权限用户显示）。
     - 点击按钮弹出编辑对话框，支持修改文本内容。
     - 修复了编辑按钮点击无反应的问题（将对话框移动到正确的 template slot）。
   - **原文展示**：
     - 在标注卡片下方增加了“原文展示”区域。
     - 当数据被修改过（存在 `meta.original_text`）时，自动显示原始文本，方便对比。
     - 修复了样式导致的 ESLint `max-len` 报错。
   - **导航栏 Logo 优化**：
     - 在操作界面（登录后）顶部导航栏统一添加了“默联数据标注平台”Logo 和标题，保持简洁大方。
     - 优化点击逻辑：已登录跳转项目列表，未登录跳转首页。

3. **系统稳定性与运维**
   - **启动脚本**：
     - 创建了一键启动脚本 `dev_start.ps1`，自动启动 Backend (8000), Celery, Frontend (3000)。
     - 为启动脚本创建了桌面快捷方式。
   - **Excel 导入修复**：
     - 修复了 Excel 导入转圈（卡住）的问题，通过重启 Celery Worker 并确认 `KnowledgeCorrection` 任务注册解决。
   - **标注数据可见性修复**：
     - 排查并解决了标注员看不到数据的问题。
     - 编写脚本 `backend/fix_assignments_and_create_approver.py` 用于自动分发任务 (Assignment) 给标注员，并创建审核员账号。

4. **其他**
   - 验证了删除项目不会触发数据库迁移操作。
   - 提供了关于角色权限区别的详细说明。
